# タスク 12: Copilot Studio 全体での Power Fx 活用

## はじめに
標準的な会話ロジックを超えて Contoso エージェントの機能を拡張するには、Power Fx 式を Copilot Studio 全体で活用する必要があります。

## 説明
Copilot Studio のさまざまな箇所で Power Fx 式を使い、複雑なシナリオや高度な対話を実現します。たとえば、日付の表示形式を Power Fx で制御したり、変数や条件、アクション、カスタムプロンプトなどで柔軟な処理が可能です。

### 例：日付表示のカスタマイズ
- 条件ノードで「Set a variable value」を追加し、Power Fx で日付を加工
- 例: `Text(DateAdd(Now(), 2, TimeUnit.Days), DateTimeFormat.LongDate)`
- メッセージノードで `{Topic.OrderDeliveryDate}` などの変数を使って表示

## 成功基準
- Power Fx 式を会話トピック等で効果的に実装できた
- テストで意図した高度なロジックが動作することを確認できた

## まとめ
- カスタムエンティティ・スロットフィリングでユーザー意図を自動取得
- 顧客データをトピック・グローバル変数で保存
- 変数値による条件分岐を実装
- テスト画面で変数値や会話フローを追跡

[Ex02 トップに戻る](./Ex02.ja.md)
